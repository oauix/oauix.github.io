<!doctype html>
<html>
	<head>
		<title>html-jqury</title>
		<meta charset="utf-8" />
		<meta name="decription" content="说明书" />
		<meta name="keywords" content="关键词" />
		<!-- 显示区缩放 适用于手机 -->
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="../css/web.css" type="text/css" />
		<style>
			
		</style>
		<script type="text/javascript">
			
		</script>
	</head>
	<body>
		<div class="body">
			<div class="content">
				<h3>生成随机图片验证码</h3>
<pre>
	protected void service(HttpServletRequest request, HttpServletResponse response) 
			throws ServletException, IOException {
		//创建画布
		BufferedImage image=new BufferedImage(120, 30, BufferedImage.TYPE_3BYTE_BGR);
		//获取画笔
		Graphics g=image.getGraphics();
		//给画笔设置颜色
		g.setColor(new Color(255, 255, 245));
		//设置画布背景颜色
		g.fillRect(100, 40, 120, 30);
		//查询给画笔设置颜色
		Random r=new Random();
		g.setColor(new Color(r.nextInt(255),r.nextInt(255),r.nextInt(255)));
		g.setFont(new Font(null, Font.BOLD, 24));
		//生成一个随机数
		String number=r.nextInt(9999)+"";
		//在图片上绘制随机数
		g.drawString(number, 50, 20);
		//在图片上绘制线
		g.drawLine(10, 5, 110, 20);
		//压缩并输出
		response.setContentType("image/jpeg");//告诉浏览器输出格式
		//是二进程字节,不用字符串流输出
		OutputStream output=response.getOutputStream();
		//将原始图片按 jpeg压缩，然后输出
		javax.imageio.ImageIO.write(image, "jpeg", output);
		
		
		output.close();
	}
</pre>
			</div>			
		</div>
	</body>
</html>